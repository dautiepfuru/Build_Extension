/* [DEV] ORGanizer for Salesforce - v10000.0.9.11 
 * Author:  (https://organizer.solutions/)
 * Copyright 2021
 */
!function(exports,global){define("salesforce-client",["global","constants","jquery"],function($G,$C,$){"use strict";function handleErrorMessage(msg){try{var parsed=JSON.parse(msg);return parsed}catch(ex){}return new Error(msg)}function ajaxCall(options){$G.isRunningContent()&&$G.isChrome?chrome.runtime.sendMessage({action:"BKG-DO-AJAX-CALL",options:options},function(rslt){return rslt.success?options.success(rslt.success.data,rslt.success.textStatus,rslt.success.request):options.error(rslt.error.request,rslt.error.textStatus,rslt.error.errorThrown)}):$.ajax(options)}function SalesforceClientConstructor(serverUrl,sessionId,apiVersion){function increaseApiCount(){return _apiCounter++,$G.getConfigParameterLocal(["apiCounter","apiCounterDate"],function(err,params){if(!err){var currentValue=(params||{}).apiCounter||0,startDate=(params||{}).apiCounterDate||(new Date).getTime();currentValue+=_apiCounter,$G.setConfigParameterLocal("apiCounter",currentValue,function(err){err||(_apiCounter=0),$G.setConfigParameterLocal("apiCounterDate",startDate)})}})}function htmlSpecialChars(unsafe){return unsafe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/%/g,"&#37;")}serverUrl=serverUrl,apiVersion=apiVersion||$C.SF_API.LEVEL,sessionId=sessionId;var self=this,_globalDescribe=null,_globalDescribeLastCallDate=null,_apiCounter=0,_getObjectDescribeByKeyOrName=function(key,name){if(!_globalDescribe)return null;for(var objName in _globalDescribe){var objDescr=_globalDescribe[objName];if(key&&objDescr.keyPrefix===key||name&&objDescr.name===name)return objDescr}return null},_updateSobject=function(id,objType,body,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/sobjects/"+objType+"/"+id,_headers={Authorization:"Bearer "+sessionId,"Content-Type":"application/json","Sforce-Auto-Assign":"FALSE"},_body=body||"{}";increaseApiCount(),ajaxCall({type:"PATCH",cache:!1,url:_url,headers:_headers,data:_body,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_describeGlobal=function(modifiedSinceDate,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/sobjects/",_headers={Authorization:"Bearer "+sessionId};modifiedSinceDate&&(_headers["If-Modified-Since"]=modifiedSinceDate.toUTCString()),increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_describeSobject=function(objectName,modifiedSinceDate,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/sobjects/"+objectName+"/describe",_headers={Authorization:"Bearer "+sessionId};modifiedSinceDate&&(_headers["If-Modified-Since"]=modifiedSinceDate.toUTCString()),increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_query=function(isTooling,queryString,callback,queryAll){queryAll=queryAll||!1;var _method=queryAll&&!isTooling?"queryAll":"query",_url=serverUrl+"/services/data/v"+apiVersion+(isTooling?"/tooling":"")+"/"+_method+"?q="+(isTooling?queryString:encodeURIComponent(queryString)),_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return!data.records.length&&data.totalSize&&data.totalSize>0&&(data.records=[{attributes:{type:"AggregateResult"},expr0:data.totalSize}]),callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_search=function(queryString,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/search?q="+encodeURIComponent(queryString),_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_queryMore=function(nextRecordsUrl,callback){var _url=serverUrl+nextRecordsUrl,_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_getObjectFromId=function(objectDescribe,objectId,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/sobjects/"+objectDescribe.name+"/"+objectId,_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return 400===request.status&&(request.responseText||"").indexOf("QUERY_TOO_COMPLICATED")>=0?self.getQueryAllFieldsString(null,objectDescribe.name,function(err,queryString){function createQueryFunction(q){return function(){return self.query(!1,q,function(err,results){return err?callback&&callback(err):(Object.assign(composedRecord,results[0]),queryFunctions.length>0?queryFunctions.splice(0,1)[0]():callback&&callback(null,composedRecord))})}}if(err)return callback&&callback(handleErrorMessage(request.responseText));for(var queryFunctions=[],tmpSplits=queryString.split(/SELECT /gi)[1].split(/FROM /gi)[0].trim().split(","),tmpQuery="",composedRecord={},i=0;i<tmpSplits.length;i++)tmpQuery+=tmpSplits[i]+",",(tmpQuery.length>=5e3||i>=tmpSplits.length-1&&tmpQuery)&&(tmpQuery="SELECT "+tmpQuery.slice(0,-1)+" FROM "+objectDescribe.name+" WHERE ID ='"+objectId+"'",queryFunctions.push(createQueryFunction(tmpQuery)),tmpQuery="");queryFunctions.splice(0,1)[0]()}):request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},_toolingQuery=function(query,callback){return _query(!0,query,callback)};this.setConfiguration=function(surl,sid,av){serverUrl=serverUrl,sessionId=sid,apiVersion=av||"36.0"},this.globalDescribe=function(callback){return _globalDescribe&&null!=_globalDescribeLastCallDate&&_globalDescribeLastCallDate-new Date<$SalesforceClient.C.FORCE_DESCRIBE_INTERVAL?callback&&callback(null,_globalDescribe):void _describeGlobal(_globalDescribeLastCallDate,function(error,data){if(error)return callback&&callback(error);if(_globalDescribeLastCallDate=new Date,data){_globalDescribe={};for(var i=0;i<data.sobjects.length;i++){var obj=data.sobjects[i];_globalDescribe[obj.name]=obj}}return callback&&callback(null,_globalDescribe)})},this.describeObjectByKeyOrName=function(objectKey,objectName,needFields,callback){var objDescrTmp=_getObjectDescribeByKeyOrName(objectKey,objectName);return objDescrTmp&&null!=objDescrTmp._describeLastCallDate&&objDescrTmp._describeLastCallDate-new Date<$SalesforceClient.C.FORCE_DESCRIBE_INTERVAL?callback&&callback(null,objDescrTmp):void this.globalDescribe(function(err,gdescr){if(err)return callback&&callback(err);var objDescr=_getObjectDescribeByKeyOrName(objectKey,objectName);return objDescr?needFields?void _describeSobject(objDescr.name,objDescr._describeLastCallDate,function(err,describeData){if(err)return callback&&callback(err);if(objDescr._describeLastCallDate=new Date,describeData){objDescr.fields={},objDescr.childRelationships={};for(var i=0;i<describeData.fields.length;i++){var field=describeData.fields[i];objDescr.fields[field.name]=field}for(var i=0;i<describeData.childRelationships.length;i++){var rel=describeData.childRelationships[i];objDescr.childRelationships[rel.relationshipName]=rel}}return callback&&callback(null,objDescr)}):callback&&callback(null,objDescr):callback&&callback(new Error('No describe found for object "'+(objectKey||objectName)+'"'))})},this.getUserInfo=function(callback){var _url=serverUrl+"/services/Soap/c/"+apiVersion,_body='<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:enterprise.soap.sforce.com">  <soapenv:Header><urn:SessionHeader><urn:sessionId>'+sessionId+"</urn:sessionId></urn:SessionHeader></soapenv:Header><soapenv:Body><urn:getUserInfo /></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"getUserInfo"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var pData=$(data).find("result"),rslt={};return pData.children().each(function(){rslt[this.tagName]=$(this).text()}),callback(null,rslt)},error:function(request,textStatus,errorThrown){return callback("Unexpected error "+errorThrown)}})},this.executeAnonymous=function(apexcode,debugCategories,callback){var _url=serverUrl+"/services/Soap/s/"+apiVersion,_body='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:apex="http://soap.sforce.com/2006/08/apex"><soapenv:Header><apex:DebuggingHeader>';if(debugCategories)for(var catName in debugCategories)_body+="<apex:categories><apex:category>"+catName+"</apex:category><apex:level>"+debugCategories[catName]+"</apex:level></apex:categories>";_body+="</apex:DebuggingHeader><apex:SessionHeader><apex:sessionId>"+sessionId+"</apex:sessionId></apex:SessionHeader></soapenv:Header><soapenv:Body><apex:executeAnonymous><apex:String>"+htmlSpecialChars(apexcode)+"</apex:String></apex:executeAnonymous></soapenv:Body></soapenv:Envelope>",increaseApiCount(),ajaxCall({url:_url,type:"POST",cache:!1,headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"executeAnonymous"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result=$(data).find("result"),rslt={result:{},debugLog:htmlSpecialChars($(data).find("debugLog").text())};return result.children().each(function(){rslt.result[this.tagName]=$(this).text()}),callback(null,rslt)},error:function(request,textStatus,errorThrown){return callback("Unexpected error "+errorThrown)}})},this.getObject=function(objectId,callback){objectId=objectId||"",this.describeObjectByKeyOrName(objectId.substring(0,3),null,!0,function(err,describe){return err?callback&&callback(err):void _getObjectFromId(describe,objectId,function(err,data){return callback&&callback(err,data,describe)})})},this.query=function(useTooling,queryString,callback,queryAll){var cumulativeResults=[],recursiveQuery=function(err,rslt){return err?callback&&callback(err):(cumulativeResults=cumulativeResults.concat(rslt.records),rslt.nextRecordsUrl?_queryMore(rslt.nextRecordsUrl,recursiveQuery):callback&&callback(null,cumulativeResults))};_query(useTooling,queryString,recursiveQuery,queryAll)},this.search=function(queryString,callback){return _search(queryString,function(err,rslt){return callback&&callback(err,rslt)})},this.getQueryAllFieldsString=function(objectKey,objectName,callback){this.describeObjectByKeyOrName(objectKey,objectName,!0,function(err,descrObj){if(err)return callback&&callback(err);var fields=[];for(var f in descrObj.fields)fields.push(f);var query="Select "+fields.join(",")+" From "+descrObj.name;return callback(null,query)})},this.updateSobject=function(objId,objName,body,callback){body=body||{},body=JSON.stringify(body),_updateSobject(objId,objName,body,function(err,rslt){return callback&&callback(err,rslt)})},this.getAllFieldsId=function(objectKey,objectName,callback){this.describeObjectByKeyOrName(objectKey,objectName,!1,function(err,data){return err?callback&&callback(err):void _toolingQuery("select+id,DurableId,Label,QualifiedApiName,developername+from+FieldDefinition+Where+EntityDefinition.QualifiedApiName='"+data.name+"'",function(err,rslt){return callback&&callback(err,rslt)})})},this.getAllFieldsById=function(fieldsId,callback){fieldsId=fieldsId||[];var query="select+id,developername,NamespacePrefix,TableEnumOrId+from+CustomField+Where+ID+IN+('"+fieldsId.join("','")+"')";_toolingQuery(query,function(err,rslt){return callback&&callback(err,rslt)})},this.getObjectsByTableEnumOrId=function(objectsId,callback){objectsId=objectsId||[];var query="select+id,DurableId,Label,QualifiedApiName,developername,NamespacePrefix,KeyPrefix+from+EntityDefinition+where+DurableId+IN+('"+objectsId.join("','")+"')";_toolingQuery(query,function(err,rslt){return callback&&callback(err,rslt)})},this.toolingAPIQuery=function(query,callback){_toolingQuery(query,function(err,rslt){return callback&&callback(err,rslt)})},this.getObjectToolingDetails=function(tableOrEnumId,callback){_toolingQuery("select+id,DurableId,Label,QualifiedApiName,developername,NamespacePrefix,KeyPrefix+from+EntityDefinition+Where+DurableId='"+tableOrEnumId+"'",function(err,rslt){return rslt&&(rslt=rslt.size?rslt.records:[]),callback&&callback(err,rslt)})},this.describeMetadata=function(callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:met="http://soap.sforce.com/2006/04/metadata"><soapenv:Header><met:CallOptions><met:client>Salesforce ORGanizer</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:describeMetadata><met:asOfVersion>"+apiVersion+"</met:asOfVersion></met:describeMetadata></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"describeMetadata"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result=$(data).find("result");result=result.find("metadataObjects");var rslt=[];result.each(function(){var metadataObject=$(this);rslt.push({directoryName:metadataObject.find("directoryName").text(),inFolder:"true"===metadataObject.find("inFolder").text(),metaFile:"true"===metadataObject.find("metaFile").text(),suffix:metadataObject.find("suffix").text(),xmlName:metadataObject.find("xmlName").text()})});for(var otherTypes=["BusinessProcess","CompactLayout","CustomField","CustomMetadata","DocumentFolder","FieldSet","ListView","NamedFilter","ReportFolder","RecordType","SharingReason","ValidationRule","WebLink","WorkflowRule","WorkflowFieldUpdate","WorkflowAlert","WorkflowKnowledgePublish","WorkflowOutboundMessage","WorkflowTask"],i=0;i<otherTypes.length;i++)rslt.push({inFolder:!1,xmlName:otherTypes[i]});return rslt.sort(function(a,b){var nameA=(a.suffix||a.xmlName||"").toLowerCase(),nameB=(b.suffix||b.xmlName||"").toLowerCase();return nameA<nameB?-1:nameA>nameB?1:0}),callback&&callback(null,rslt)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.listMetadata=function(metadataType,callback){if(!metadataType)return callback&&callback(new Error("Invalid metadatas"));var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<se:Envelope xmlns:se="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:m="http://soap.sforce.com/2006/04/metadata" xmlns:p="urn:partner.soap.sforce.com"><se:Header><m:SessionHeader><p:sessionId>'+sessionId+'</p:sessionId></m:SessionHeader></se:Header><se:Body><m:listMetadata><m:queries xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="queries"><type>'+metadataType+"</type></m:queries></m:listMetadata></se:Body></se:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"listMetadata"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var results=$(data).find("result"),rslt=[];return results.each(function(){var metadataObject=$(this),t={};metadataObject.children().each(function(){t[this.tagName]=$(this).text()}),rslt.push(t)}),rslt.sort(function(a,b){var nameA=(a.fullName||a.fullName||"").toLowerCase(),nameB=(b.fullName||b.fullName||"").toLowerCase();return nameA<nameB?-1:nameA>nameB?1:0}),callback&&callback(null,rslt)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.soapLogin=function(username,password,token,callback){var _url=serverUrl+"/services/Soap/u/"+apiVersion,_body='<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:partner.soap.sforce.com"><soapenv:Body><urn:login><urn:username><![CDATA['+(username||"")+"]]></urn:username><urn:password><![CDATA["+((password||"")+(token||""))+"]]></urn:password></urn:login></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"login"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result={metadataServerUrl:$(data).find("metadataServerUrl").text(),passwordExpired:"true"===$(data).find("passwordExpired").text(),sandbox:"true"===$(data).find("sandbox").text(),serverUrl:$(data).find("serverUrl").text(),sessionId:$(data).find("sessionId").text(),userId:$(data).find("userId").text(),userInfo:{}};return $(data).find("userInfo").children().each(function(){result.userInfo[this.tagName]=$(this).text()}),callback&&callback(null,result)},error:function(request,textStatus,errorThrown){var err=errorThrown;if(request.responseText){$(request.responseText).find("faultstring");err=$(request.responseText).find("faultstring").text()}else err=textStatus+" "+errorThrown;return callback&&callback(err)}})},this.retrievePackage=function(packageId,callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:met="http://soap.sforce.com/2006/04/metadata" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><met:CallOptions><met:client>Salesforce ORGanizer</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:retrieve><met:retrieveRequest><met:apiVersion>"+apiVersion+"</met:apiVersion><met:packageNames>"+packageId+"</met:packageNames><met:singlePackage>1</met:singlePackage></met:retrieveRequest></met:retrieve></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"retrieve"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result={id:$(data).find("id").text(),done:"true"===$(data).find("done").text(),state:$(data).find("state").text(),errorMessage:$(data).find("errorMessage").text(),errorStatusCode:$(data).find("errorStatusCode").text()};return callback&&callback(null,result)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.retrieveMetadataType=function(typeMap,callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:met="http://soap.sforce.com/2006/04/metadata" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><met:CallOptions><met:client>Salesforce ORGanizer</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:retrieve><met:retrieveRequest><met:apiVersion>"+apiVersion+"</met:apiVersion><met:singlePackage>1</met:singlePackage><met:unpackaged>";for(var key in typeMap)if(typeMap.hasOwnProperty(key)){_body+="<met:types>";for(var i=0;i<typeMap[key].length;i++)_body+="<met:members>"+typeMap[key][i].fullName+"</met:members>";_body+="<met:name>"+key+"</met:name></met:types>"}_body+="</met:unpackaged></met:retrieveRequest></met:retrieve></soapenv:Body></soapenv:Envelope>",increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"retrieve"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result={id:$(data).find("id").text(),done:"true"===$(data).find("done").text(),state:$(data).find("state").text(),errorMessage:$(data).find("errorMessage").text(),errorStatusCode:$(data).find("errorStatusCode").text()};return callback&&callback(null,result)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.checkRetrievePackageStatus=function(retrieveId,callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:met="http://soap.sforce.com/2006/04/metadata" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><met:CallOptions><met:client>Salesforce ORGanizer</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:checkRetrieveStatus><met:asyncProcessId>"+retrieveId+"</met:asyncProcessId><met:includeZip>1</met:includeZip></met:checkRetrieveStatus></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"checkRetrieveStatus"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data,data=$(data);var result={done:"true"===data.find("done").text(),success:"true"===data.find("success").text(),zip:data.find("zipFile").text(),status:data.find("status").text(),errorMessage:data.find("errorMessage").text(),errorStatusCode:data.find("errorStatusCode").text()};return callback&&callback(null,result)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.deploy=function(zipFile,deployOptions,callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:met="http://soap.sforce.com/2006/04/metadata" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><met:CallOptions><met:client>ORGanizer for Salesforce</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:deploy><met:zipFile>"+zipFile+"</met:zipFile><met:deployOptions><met:singlePackage>true</met:singlePackage><met:allowMissingFiles>false</met:allowMissingFiles><met:rollbackOnError>true</met:rollbackOnError></met:deployOptions></met:deploy></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"retrieve",SOAPAction:"deploy"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data;var result={id:$(data).find("id").text(),done:"true"===$(data).find("done").text(),state:$(data).find("state").text()};return callback&&callback(null,result)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.checkDeployPackageStatus=function(retrieveId,callback){var _url=serverUrl+"/services/Soap/m/"+apiVersion,_body='<soapenv:Envelope xmlns:met="http://soap.sforce.com/2006/04/metadata" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header><met:CallOptions><met:client>ORGanizer for Salesforce</met:client></met:CallOptions><met:SessionHeader><met:sessionId>'+sessionId+"</met:sessionId></met:SessionHeader></soapenv:Header><soapenv:Body><met:checkDeployStatus><met:asyncProcessId>"+retrieveId+"</met:asyncProcessId><met:includeDetails>true</met:includeDetails></met:checkDeployStatus></soapenv:Body></soapenv:Envelope>";increaseApiCount(),ajaxCall({url:_url,cache:!1,type:"POST",headers:{"Content-Type":"text/xml; charset=utf-8",SOAPAction:"checkDeployStatus"},data:_body,dataType:"xml",success:function(data,textStatus,request){data="string"==typeof data?(new DOMParser).parseFromString(data,"text/xml"):data,data=$(data).find("result");var result={id:data.find("result > id").text(),done:"true"===data.find("result > done").text(),success:"true"===data.find("result > success").text(),status:data.find("result > status").text(),errorMessage:data.find("errorMessage").text(),errorStatusCode:data.find("errorStatusCode").text()};return callback&&callback(null,result)},error:function(request,textStatus,errorThrown){return callback&&callback("Unexpected error "+errorThrown)}})},this.getORGlimits=function(callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/limits/",_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})},this.getUIAPIForRecord=function(recordId,callback){var _url=serverUrl+"/services/data/v"+apiVersion+"/ui-api/record-ui/"+recordId,_headers={Authorization:"Bearer "+sessionId};increaseApiCount(),ajaxCall({type:"GET",cache:!1,url:_url,headers:_headers,success:function(data,textStatus,request){return callback&&callback(null,data)},error:function(request,textStatus,errorThrown){return request&&request.responseText?callback&&callback(handleErrorMessage(request.responseText)):callback&&callback("Unexpected error "+errorThrown)}})}}var $SalesforceClient={Client:SalesforceClientConstructor,C:{FORCE_DESCRIBE_INTERVAL:3e5}};return $SalesforceClient}),global.true=exports}({},function(){return this}());